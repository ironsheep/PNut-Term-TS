# v0.6.8 Acceptance Test Plan

## Overview
Comprehensive acceptance test for v0.6.8 features: Dual-Parameter Resolution, Enhanced List Operations, Bulk Operations, Multi-Format Export, Safe Archive, and Import functionality.

## Testing Phases

### Iterative Testing Process

**FUNDAMENTAL PRINCIPLE: EVERY TEST PASS IS A COMPLETE SYSTEM VALIDATION**
- Each test pass must test ALL features, not just new/changed ones
- We test the ENTIRE system every time to catch regressions
- Even if only one bug was fixed, we test EVERYTHING again
- This ensures quality improves with each iteration

**CRITICAL REQUIREMENT: COMPLETE TESTING IS MANDATORY**
**NO TEST MAY BE SKIPPED OR ABBREVIATED FOR ANY REASON**

- **ALL sections MUST be tested completely** - no exceptions
- **Time constraints are NOT acceptable** for skipping tests
- **Every test case MUST be executed** even if it takes hours
- **Incomplete testing = TEST FAILURE** regardless of other results
- **If testing cannot be completed, mark entire test run as FAILED**

**IMPORTANT: Maximum Information Gathering Principle**
Each test iteration should gather as much information as possible, even when some features are broken:
- **Continue testing** all available features even if some are missing/broken
- **Skip ONLY sections blocked by missing dependencies** but test everything else
- **Document all findings** - both working and broken features
- **Provide comprehensive feedback** on each iteration to maximize fixes per cycle
- **BUT NEVER skip sections due to time - testing must be complete**

**MCP Testing will be used iteratively until all commands pass:**
1. Run complete MCP test suite, testing ALL accessible features
2. Document ALL issues found (critical, major, and minor)
3. Mark sections as "BLOCKED" if dependencies are missing but continue testing others
4. Development team fixes identified issues
5. New build provided for testing
6. Complete test suite is run again from the beginning
7. Repeat cycle until ALL tests pass

**Test Coverage Goals Per Iteration:**
- First iteration: Aim for 70%+ coverage of available features
- Subsequent iterations: Test newly fixed features + regression test previous ones
- Final iteration: 100% coverage with all features working

**Once MCP tests pass:**
- Move to CLI testing using same iterative approach
- Only when BOTH test suites pass ‚Üí Create formal release build
- Run both test suites one final time against release build for validation

### Phase 1: Development Testing (Multiple Iterations)
- **Build Identifier**: `commit: For External Test`
- **Purpose**: Find and fix issues through iterative testing
- **Expected**: Multiple complete test runs, each identifying fewer issues
- **Test Reports**: New report for each iteration, timestamped
- **Continue Until**: ALL tests pass without issues

### Phase 2: Final Release Validation (Single Run)
- **Build Identifier**: `commit: [actual git commit hash]`
- **Purpose**: Final validation of formal release build
- **Expected**: Single test run with 100% pass rate (no new issues)
- **Test Report**: Final confirmation report
- **Pass Criteria**: ALL tests must pass, confirming release readiness

## CRITICAL TESTING RULES

### üî¥ MANDATORY: Use MCP Server ONLY
**ALWAYS test through the connected MCP server in Claude Desktop or CLI mode.**
- Testing isolated binaries does NOT prove the server works correctly
- Many issues only appear when running as a real MCP server
- All tests MUST use the actual server methods

### ‚õî FORBIDDEN: Direct File Access
**NEVER access files directly during testing:**
- ‚ùå DO NOT read export files directly from filesystem
- ‚ùå DO NOT check if archive files exist by looking at folders
- ‚ùå DO NOT examine the database file directly
- ‚ùå DO NOT verify file contents outside of MCP methods

**ALL validation must happen through MCP methods:**
- ‚úÖ Use `mcp__todo-mcp__todo_list` to verify task state
- ‚úÖ Use `mcp__todo-mcp__todo_import` to validate exports
- ‚úÖ Trust the success/error messages from MCP methods
- ‚úÖ Use only the MCP API to interact with the system

**Why this matters:**
- The MCP server controls file access and permissions
- Direct file access bypasses server validation logic
- Tests must prove the SERVER works, not just that files exist
- Real users will only interact through the MCP interface

## Important Testing Notes

### Critical Testing Pattern: ALWAYS VERIFY "EMPTY" STATES
**When ANY operation returns "empty", "none", or "no results", ALWAYS run a verification command:**
1. If `context_resume` shows "Working Memory: (empty)" ‚Üí Run `context_get_all` to verify
2. If search returns "No tasks found" ‚Üí Run `todo_list` without filters to verify
3. If status filter returns empty ‚Üí Run `todo_list` to see all tasks
4. If archive says "No completed tasks" ‚Üí Run `todo_list` to verify what remains

**This pattern reveals bugs where:**
- Functions incorrectly report empty when data exists
- Filters are broken and excluding valid results
- State is not being read correctly

### Task ID Format Convention
**Guillemets (¬´ ¬ª) Usage:**
- **Output**: Task IDs should ALWAYS display with guillemets in ALL output: `¬´#49¬ª`
  - List displays: `1. ‚óã üî¥ Task name ¬´#49¬ª` ‚úÖ
  - Creation responses: `Created task ¬´#49¬ª`
  - Action responses: `Started task ¬´#49¬ª`, `Completed task ¬´#49¬ª`
- **Input**: Task IDs NEVER use guillemets when provided as parameters: use `#49` or just `49`

This is intentional design - guillemets are visual indicators in ALL output, never part of input.

## MANDATORY TESTING COMPLETION REQUIREMENTS

### ‚õî ABSOLUTE REQUIREMENTS - NO EXCEPTIONS
1. **EVERY section (0-12) MUST be fully tested** (except Section 8 unless specifically requested)
2. **EVERY test case in each section MUST be executed**
3. **NO abbreviation for time constraints**
4. **NO skipping "less important" tests**
5. **Testing incomplete = ENTIRE TEST RUN FAILS**
6. **ALL FEATURES must be tested in EVERY test pass** - not just new or changed features
7. **Each test pass is a COMPLETE validation** of the entire system

### Test Run Validity Criteria
A test run is ONLY valid if:
- ‚úÖ All sections completed (except Section 8 unless requested, and Section 11 deferred items)
- ‚úÖ Every documented test case executed
- ‚úÖ Full documentation review performed
- ‚úÖ All edge cases tested (except those explicitly deferred)
- ‚úÖ Grammar evaluation completed
- ‚úÖ Test cleanup performed
- ‚úÖ **COMPLETE SYSTEM VALIDATION** - not partial testing of changes

**If ANY section is skipped or abbreviated:**
- ‚ùå Mark test run as FAILED
- ‚ùå Do NOT approve for release
- ‚ùå Must restart testing from beginning

### Time Management
- Allocate sufficient time (2-3 hours minimum)
- If running out of time, PAUSE and resume later
- NEVER skip tests to save time
- Better to have complete testing over multiple sessions than incomplete in one

---

## Pre-Test Setup and Verification

### 1. Version Verification and Test Report Setup
**ALWAYS START** by checking the version and creating test report:
```bash
mcp__todo-mcp__version
# Record EXACT output including build date and commit ID
```

**EXPECTED VERSION OUTPUT PATTERNS:**

**During Development/Testing Phase:**
```
todo-mcp version v0.6.8 (built: 2025-08-11T12:00:00Z, commit: For External Test)
```
- This indicates a pre-commit test build
- Multiple iterations expected with this output
- Document all issues found

**Final Release Build (after all fixes):**
```
todo-mcp version v0.6.8 (built: 2025-08-11T15:30:00Z, commit: d2cdd8d)
```
- This indicates the final post-commit release build
- Contains actual git commit ID
- This is the FINAL acceptance test run
- Must pass 100% for release

**CREATE TEST REPORT FILE:**
Create a new test report file with this EXACT naming format:
- **Location**: `/workspace/docs/testing/`
- **Filename**: `v0.6.8_TEST_REPORT_MCP_{version}_{YYMMDD-HHMM}.md`
  - `MCP`: Indicates this is MCP mode testing
  - `{version}`: The exact version string returned (e.g., "v0.6.8" or "dev")
  - `{YYMMDD-HHMM}`: Test start time (e.g., "250811-1430" for Aug 11, 2025 at 2:30 PM)
  
Example: `v0.6.8_TEST_REPORT_MCP_v0.6.8_250811-1430.md`

**TEST REPORT HEADER:**
Start the test report with:
```markdown
# v0.6.8 Test Report

## Build Information
- **Version Output**: [EXACT output from mcp__todo-mcp__version]
- **Build Version**: [version string]
- **Build Date**: [from version output]
- **Commit ID**: [from version output]
- **Test Started**: [YYYY-MM-DD HH:MM:SS]
- **Test Platform**: [macOS/Linux/Windows]
- **Tester**: [Claude instance identifier]

## Test Execution Summary
[Will be filled as tests progress]
```

### 2. Pre-Test Checklist
- [ ] Verify mcp__todo-mcp__* tools are available
- [ ] Check version and record in test report
- [ ] Create test report file with prescribed name
- [ ] Clear database: `mcp__todo-mcp__todo_clear_all force:true`
- [ ] Clear context: `mcp__todo-mcp__context_clear force:true`
- [ ] Note test start time in report

### 3. Connectivity Monitoring
**After EVERY test section**, verify server is still responsive:
```bash
mcp__todo-mcp__project_status
# If server crashes, note: "SERVER CRASHED after [operation]"
```

---

## Section 0: MCP Function Documentation Evaluation

### 0.1 Documentation Quality Assessment
**PURPOSE: Ensure MCP function descriptions provide excellent guidance for Claude**

Review the function documentation available when connected to the MCP server.
Each function should have:
- Clear, concise description of what it does
- Complete parameter documentation with types and constraints
- Expected return format/output
- Error conditions and messages
- Usage examples or patterns where helpful

### 0.2 Function Documentation Review
```bash
# For each available mcp__todo-mcp__* function, evaluate:

# Core Task Functions
mcp__todo-mcp__todo_create
- [ ] Description clearly explains task creation
- [ ] Parameters (content, estimate_minutes, priority, tags) well documented
- [ ] Return format clear (e.g., "Created task #N: content")
- [ ] Priority values documented (critical/high/medium/low/backlog)

mcp__todo-mcp__todo_complete
- [ ] Dual parameter support (position_id/task_id) clearly explained
- [ ] Deprecation warnings present if needed
- [ ] Examples of both parameter types

mcp__todo-mcp__todo_list
- [ ] All filter parameters documented (status, priority, search, sort_by, etc.)
- [ ] STF output format explained
- [ ] Status values documented (created/in_progress/paused/completed)

mcp__todo-mcp__todo_bulk
- [ ] Action types documented
- [ ] Filter object structure clear
- [ ] Atomicity behavior explained

# Context Functions
mcp__todo-mcp__context_set/get/delete/clear
- [ ] Key naming conventions suggested
- [ ] Force parameter requirements clear
- [ ] Pattern matching behavior documented

mcp__todo-mcp__context_resume
- [ ] Output format documented
- [ ] Use case (crash recovery) explained

# Export/Import Functions
mcp__todo-mcp__todo_export
- [ ] Format options listed (markdown/json/csv/org)
- [ ] include_completed parameter explained
- [ ] Output path pattern documented

mcp__todo-mcp__todo_import
- [ ] Mode options (merge/replace/validate) explained
- [ ] File format auto-detection mentioned
- [ ] Error handling documented

# Archive/Backup Functions
mcp__todo-mcp__todo_archive
- [ ] Safe export behavior explained
- [ ] Archive location documented

mcp__todo-mcp__project_dump/project_restore
- [ ] Backup scope explained (tasks + context)
- [ ] Compression options documented
- [ ] Restore modes explained
```

### 0.3 Documentation Issues Found
Document any issues with function documentation:

#### Critical (Blocks effective use)
1. [Function name]: [What's missing/unclear]
2. 

#### Important (Should improve)
1. [Function name]: [Suggested improvement]
2. 

#### Minor (Nice to have)
1. [Function name]: [Enhancement suggestion]
2. 

### 0.4 Recommended Documentation Updates
```markdown
## Suggested Changes to Function Descriptions

### mcp__todo-mcp__[function_name]
**Current**: [current description]
**Suggested**: [improved description]
**Reason**: [why this is better]

### Parameter Documentation
**Function**: [function_name]
**Parameter**: [param_name]
**Issue**: [what's unclear]
**Suggested**: [clearer documentation]
```

### 0.5 Documentation Completeness Checklist
- [ ] All v0.6.8 features documented in function descriptions
- [ ] Dual-parameter resolution clearly explained
- [ ] STF format documented
- [ ] Priority and status values listed
- [ ] Error messages documented
- [ ] Common workflows suggested
- [ ] Deprecation warnings present where needed
- [ ] Return formats consistent and clear

### 0.6 Documentation Improvement Tracking
**IMPORTANT: Track documentation improvements across iterations**

### **MANDATORY: Request Documentation Improvements**
**At the end of EVERY test iteration**, document any Claude guidance that is not excellent and request fixes for the next build:

```markdown
### **REQUEST FOR NEXT BUILD:**
Please address the following Claude guidance improvements identified:
1. [Specific function]: [Specific improvement needed]
2. [Another function]: [Another improvement needed]

These improvements will enhance Claude's ability to use the MCP functions effectively and reduce user confusion.
```

**Why this matters:**
- Claude's effectiveness depends on clear function documentation
- Small documentation improvements have large impact on usability
- Iterative improvement ensures excellent Claude integration
- Users rely on Claude understanding the functions correctly

#### Iteration Comparison
Compare function descriptions between test runs:
```markdown
## Iteration N Documentation Changes
### Function: [function_name]
**Previous**: [old description]
**Current**: [new description]
**Still Missing**: [what still needs documenting]
**Improvement Score**: [Better/Same/Worse]
```

#### Documentation Quality Metrics
Track improvement across iterations:
- **Iteration 1**: X% of functions fully documented
- **Iteration 2**: Y% of functions fully documented (+Z%)
- **Target**: 100% of functions with complete, accurate descriptions

#### Priority Documentation Fixes
Based on test findings, these MUST be fixed by next iteration:
1. **CRITICAL**: Functions that block usage without docs
2. **HIGH**: Functions with wrong/misleading docs
3. **MEDIUM**: Functions missing helpful details
4. **LOW**: Functions that could use examples

#### Documentation Validation
Each iteration should verify:
- [ ] Previously identified issues are fixed
- [ ] New functions have complete docs
- [ ] Examples match actual behavior
- [ ] Parameter types are accurate
- [ ] Return formats are specified
- [ ] Error conditions are documented

---

## Section 0.5: Priority and Sequence System Testing (CRITICAL)

### 0.5.1 Priority System Validation
**PURPOSE: Validate priority scoring, display, and recommendation logic**

```bash
# Create tasks with different priorities to test the full priority system
mcp__todo-mcp__todo_create content:"Critical bug fix" priority:"critical" estimate_minutes:120
mcp__todo-mcp__todo_create content:"High priority feature" priority:"high" estimate_minutes:180  
mcp__todo-mcp__todo_create content:"Medium task" priority:"medium" estimate_minutes:90
mcp__todo-mcp__todo_create content:"Low priority docs" priority:"low" estimate_minutes:45
mcp__todo-mcp__todo_create content:"Backlog item" priority:"backlog" estimate_minutes:30

# Test priority display in STF format
mcp__todo-mcp__todo_list
# EXPECTED STF FORMAT:
# 1. ‚óã ‚ö° Critical bug fix (est: 2h) ¬´#N¬ª
# 2. ‚óã üî¥ High priority feature (est: 3h) ¬´#N¬ª  
# 3. ‚óã üü° Medium task (est: 1h 30m) ¬´#N¬ª
# 4. ‚óã üü¢ Low priority docs (est: 45m) ¬´#N¬ª
# 5. ‚óã üîµ Backlog item (est: 30m) ¬´#N¬ª

# Test priority-based sorting (should be default behavior)
mcp__todo-mcp__todo_list sort_by:"priority" sort_order:"desc"
# Expected: Critical ‚Üí High ‚Üí Medium ‚Üí Low ‚Üí Backlog order

# Test todo_next priority recommendation logic
mcp__todo-mcp__todo_next  
# Expected: Should recommend the critical task with reasoning about why
# Example: "Recommended: Task ¬´#1¬ª - Critical bug fix (highest priority, unblocked)"

# Test priority filtering
mcp__todo-mcp__todo_list priority:"critical"
# Expected: Only critical task shown

mcp__todo-mcp__todo_list priority:"high"  
# Expected: Only high priority task shown

# Test invalid priority handling
mcp__todo-mcp__todo_create content:"Test task" priority:"invalid"
# Expected: Error with list of valid priorities
```

### 0.5.2 Sequence System Validation  
**PURPOSE: Test custom task ordering with sequence field**

```bash
# Create tasks to test sequence ordering
mcp__todo-mcp__todo_create content:"First in sequence" priority:"high" estimate_minutes:60
mcp__todo-mcp__todo_create content:"Second in sequence" priority:"high" estimate_minutes:60  
mcp__todo-mcp__todo_create content:"Third in sequence" priority:"high" estimate_minutes:60

# Set explicit sequence values using position_id
mcp__todo-mcp__todo_update position_id:1 sequence:10   # First task gets sequence 10
mcp__todo-mcp__todo_update position_id:2 sequence:30   # Second task gets sequence 30  
mcp__todo-mcp__todo_update position_id:3 sequence:20   # Third task gets sequence 20

# Test sequence display in STF format
mcp__todo-mcp__todo_list
# EXPECTED: Tasks show "seq:N" when sequence is set:
# 1. ‚óã üî¥ First in sequence seq:10 (est: 1h) ¬´#1¬ª
# 2. ‚óã üî¥ Second in sequence seq:30 (est: 1h) ¬´#2¬ª  
# 3. ‚óã üî¥ Third in sequence seq:20 (est: 1h) ¬´#3¬ª

# Test sorting by sequence
mcp__todo-mcp__todo_list sort_by:"sequence" sort_order:"asc"
# EXPECTED: Tasks ordered by sequence value:
# 1. ‚óã üî¥ First in sequence seq:10 (est: 1h) ¬´#1¬ª
# 2. ‚óã üî¥ Third in sequence seq:20 (est: 1h) ¬´#3¬ª  
# 3. ‚óã üî¥ Second in sequence seq:30 (est: 1h) ¬´#2¬ª

# Test bulk resequence operation
mcp__todo-mcp__todo_bulk operation:"resequence" positions:[2,3,1] data:{start_position:100}
# Expected: "‚úì Bulk operation completed: 3 tasks affected"

mcp__todo-mcp__todo_list sort_by:"sequence" sort_order:"asc"
# EXPECTED after resequence:
# 1. ‚óã üî¥ Second in sequence seq:100 (est: 1h) ¬´#2¬ª
# 2. ‚óã üî¥ Third in sequence seq:101 (est: 1h) ¬´#3¬ª
# 3. ‚óã üî¥ First in sequence seq:102 (est: 1h) ¬´#1¬ª

# Test todo_next with sequence consideration
mcp__todo-mcp__todo_next
# Expected: Should recommend task with sequence 1 within the high priority group
# Example: "Recommended: Task ¬´#6¬ª - First in sequence (high priority, sequence 1)"
```

### 0.5.3 Priority + Sequence Integration Testing
**PURPOSE: Test how priority and sequence work together**

```bash
# Create complex scenario: multiple priorities with sequences
mcp__todo-mcp__todo_clear_all force:true

# Critical priority tasks with sequences
mcp__todo-mcp__todo_create content:"Critical task A" priority:"critical" estimate_minutes:60
mcp__todo-mcp__todo_create content:"Critical task B" priority:"critical" estimate_minutes:90
mcp__todo-mcp__todo_update task_id:"#1" sequence:2   # Critical A gets sequence 2
mcp__todo-mcp__todo_update task_id:"#2" sequence:1   # Critical B gets sequence 1

# High priority tasks with sequences  
mcp__todo-mcp__todo_create content:"High task A" priority:"high" estimate_minutes:45
mcp__todo-mcp__todo_create content:"High task B" priority:"high" estimate_minutes:75
mcp__todo-mcp__todo_update task_id:"#3" sequence:1   # High A gets sequence 1
mcp__todo-mcp__todo_update task_id:"#4" sequence:2   # High B gets sequence 2

# Medium priority task (no sequence)
mcp__todo-mcp__todo_create content:"Medium task" priority:"medium" estimate_minutes:30

# Test integrated display
mcp__todo-mcp__todo_list
# EXPECTED ORDER (Priority first, then sequence within priority):
# 2. ‚óã ‚ö° Critical task B (seq: 1, est: 1h 30m) ¬´#2¬ª
# 1. ‚óã ‚ö° Critical task A (seq: 2, est: 1h) ¬´#1¬ª  
# 3. ‚óã üî¥ High task A (seq: 1, est: 45m) ¬´#3¬ª
# 4. ‚óã üî¥ High task B (seq: 2, est: 1h 15m) ¬´#4¬ª
# 5. ‚óã üü° Medium task (est: 30m) ¬´#5¬ª

# Test todo_next with complex priority+sequence logic
mcp__todo-mcp__todo_next
# Expected: Should recommend Critical task B (highest priority + sequence 1)
# Example: "Recommended: Task ¬´#2¬ª - Critical task B (critical priority, sequence 1)"

# Start the recommended task and test next recommendation
mcp__todo-mcp__todo_start task_id:"#2"
mcp__todo-mcp__todo_next  
# Expected: Should now recommend Critical task A (next in critical priority)
# Example: "Recommended: Task ¬´#1¬ª - Critical task A (critical priority, sequence 2)"

# Complete critical tasks and test next falls to high priority
mcp__todo-mcp__todo_complete task_id:"#2"
mcp__todo-mcp__todo_start task_id:"#1"  
mcp__todo-mcp__todo_complete task_id:"#1"
mcp__todo-mcp__todo_next
# Expected: Should recommend High task A (highest remaining priority, sequence 1)
```

### 0.5.4 Edge Cases and Error Handling
**PURPOSE: Test boundary conditions for priority and sequence**

```bash
# Test sequence edge cases
mcp__todo-mcp__todo_update task_id:"#3" sequence:0    # Zero sequence
mcp__todo-mcp__todo_update task_id:"#4" sequence:-1   # Negative sequence  
mcp__todo-mcp__todo_update task_id:"#5" sequence:999  # High sequence number

# Test sequence display with edge cases
mcp__todo-mcp__todo_list sort_by:"sequence"
# Expected: Proper handling of zero, negative, and high sequence numbers

# Test priority edge cases
mcp__todo-mcp__todo_create content:"Invalid priority test" priority:"urgent"
# Expected: Error listing valid priorities (critical/high/medium/low/backlog)

# Test sequence without priority consideration
mcp__todo-mcp__todo_create content:"High sequence, low priority" priority:"low" estimate_minutes:15
mcp__todo-mcp__todo_update task_id:"#6" sequence:1    # Sequence 1 but low priority
mcp__todo-mcp__todo_next
# Expected: Should still recommend higher priority tasks first, not this low priority task
```

### 0.5.5 Success Criteria for Priority and Sequence System
**CRITICAL - All must pass for release:**

- ‚úÖ **Priority symbols display correctly**: ‚ö°(critical) üî¥(high) üü°(medium) üü¢(low) üîµ(backlog)
- ‚úÖ **Sequence numbers display in STF**: "seq:N" shown when set (no space)
- ‚úÖ **Priority-based ordering**: Higher priorities always come first in lists
- ‚úÖ **Sequence field update**: Can set sequence via todo_update
- ‚úÖ **todo_next respects priority**: Always recommends highest priority available task
- ‚úÖ **Bulk resequence operation**: Can reorder multiple tasks at once
- ‚úÖ **Priority filtering works**: Can filter by specific priority levels
- ‚úÖ **Sequence sorting works**: sort_by:"sequence" orders tasks by sequence value
- ‚úÖ **Edge cases handled**: Zero, negative, and high sequence numbers work
- ‚úÖ **Error handling**: Invalid priorities rejected with helpful messages
- ‚úÖ **Integration logic**: Priority + sequence + status all work together correctly

**This section is CRITICAL for v0.6.8 - priority and sequence are core features that must work perfectly.**

---

## Section 1: Dual-Parameter Resolution

### 1.1 Position-based Operations
```bash
# Create test tasks
mcp__todo-mcp__todo_create content:"First task" estimate_minutes:60
# Expected: "Created task #1: First task"

mcp__todo-mcp__todo_create content:"Second task" estimate_minutes:120 priority:"high"
# Expected: "Created task #2: Second task"

mcp__todo-mcp__todo_create content:"Third task" estimate_minutes:30
# Expected: "Created task #3: Third task"

# Test position_id parameter
mcp__todo-mcp__todo_start position_id:1
# Expected: "‚ñ∂ Started task #1: First task"

mcp__todo-mcp__todo_complete position_id:1
# Expected: "‚úÖ Completed task #1: First task (took Xm)"

mcp__todo-mcp__todo_update position_id:1 priority:"critical"
# Expected: "üìù Updated task #2: Second task" (position 1 is now task #2)
```

### 1.2 Task ID Operations
```bash
# Test task_id parameter with hash
mcp__todo-mcp__todo_start task_id:"#2"
# Expected: "‚ñ∂ Started task #2: Second task"

# Test task_id without hash
mcp__todo-mcp__todo_pause task_id:"2" reason:"Waiting for review"
# Expected: "‚è∏ Paused task #2: Waiting for review"

# Test with guillemet format (if shown in list)
mcp__todo-mcp__todo_resume task_id:"¬´#2¬ª"
# Expected: "‚ñ∂ Resumed task #2: Second task"

# Test numeric format
mcp__todo-mcp__todo_update task_id:2 content:"Updated second task"
# Expected: "üìù Updated task #2: Updated second task"
```

### 1.3 Dual Parameter Handling
```bash
# Both parameters provided (task_id should win)
mcp__todo-mcp__todo_update position_id:1 task_id:"#3" content:"Testing precedence"
# Expected: Updates task #3 (not position 1), may log mismatch warning

# Mismatched parameters
mcp__todo-mcp__todo_complete position_id:2 task_id:"#3"
# Expected: Completes task #3, logs that position_id:2 doesn't match
```

### 1.4 Error Cases
```bash
# Invalid position
mcp__todo-mcp__todo_complete position_id:999
# Expected: Error "Position 999 not found. Available positions: 1-N"

# Invalid task ID
mcp__todo-mcp__todo_complete task_id:"#999"
# Expected: Error "Task #999 not found"

# No parameters
mcp__todo-mcp__todo_complete
# Expected: Error "Either position_id or task_id required"

# Malformed task ID
mcp__todo-mcp__todo_update task_id:"not-a-number" content:"Test"
# Expected: Error about invalid task_id format
```

---

## Section 2: Enhanced List with Search/Filter/Sort

### 2.1 Setup Test Data
```bash
# Clear and create diverse tasks
mcp__todo-mcp__todo_clear_all force:true
mcp__todo-mcp__todo_create content:"Bug: Login fails" priority:"high" estimate_minutes:120
mcp__todo-mcp__todo_create content:"Feature: Add dark mode" priority:"medium" estimate_minutes:240
mcp__todo-mcp__todo_create content:"Bug: Memory leak in parser" priority:"critical" estimate_minutes:180
mcp__todo-mcp__todo_create content:"Docs: Update README" priority:"low" estimate_minutes:30
mcp__todo-mcp__todo_create content:"Refactor: Clean up auth code" priority:"medium" estimate_minutes:90
mcp__todo-mcp__todo_create content:"Test: Add unit tests" priority:"high" estimate_minutes:150
mcp__todo-mcp__todo_create content:"Deploy: Production release" priority:"critical" estimate_minutes:60
```

### 2.2 Search Functionality
```bash
# Basic search (case-insensitive)
mcp__todo-mcp__todo_list search:"bug"
# Expected: Returns both bug tasks (#1 and #3)

# Search with uppercase
mcp__todo-mcp__todo_list search:"BUG"
# Expected: Same results (case-insensitive)

# Partial word search
mcp__todo-mcp__todo_list search:"feat"
# Expected: Returns "Feature: Add dark mode"

# No results search
mcp__todo-mcp__todo_list search:"xyz123"
# Expected: Empty list or "No tasks found"

# VERIFICATION: If search returns "No tasks found", verify with:
mcp__todo-mcp__todo_list
# This confirms whether the search genuinely found nothing,
# or if there's a bug in the search functionality
```

### 2.3 Filter by Status
```bash
# Start some tasks
mcp__todo-mcp__todo_start position_id:1
mcp__todo-mcp__todo_start position_id:2
mcp__todo-mcp__todo_pause position_id:2 reason:"Blocked"

# Filter in-progress
mcp__todo-mcp__todo_list status:"in_progress"
# Expected: Only task #1

# Filter paused
mcp__todo-mcp__todo_list status:"paused"
# Expected: Only task #2

# Filter created/pending
mcp__todo-mcp__todo_list status:"created"
# Expected: Tasks #3-7
```

### 2.4 Filter by Priority
```bash
# Filter critical priority
mcp__todo-mcp__todo_list priority:"critical"
# Expected: Tasks #3 and #7

# Filter high priority
mcp__todo-mcp__todo_list priority:"high"
# Expected: Tasks #1 and #6

# Filter multiple (if supported)
mcp__todo-mcp__todo_list priority:"critical,high"
# Expected: Tasks #1, #3, #6, #7 (or error if not supported)
```

### 2.5 Sorting
```bash
# Sort by priority (descending)
mcp__todo-mcp__todo_list sort_by:"priority" sort_order:"desc"
# Expected: Critical first (‚ö°), then high (üî¥), medium (üü°), low (üü¢)

# Sort by estimate (ascending)
mcp__todo-mcp__todo_list sort_by:"estimate" sort_order:"asc"
# Expected: 30min task first, then 60min, 90min, etc.

# Sort by created date
mcp__todo-mcp__todo_list sort_by:"created" sort_order:"asc"
# Expected: Tasks in order #1-7
```

### 2.6 Combined Filters
```bash
# Search + Status
mcp__todo-mcp__todo_list search:"bug" status:"in_progress"
# Expected: Only in-progress bug tasks

# Priority + Sort
mcp__todo-mcp__todo_list priority:"medium" sort_by:"estimate" sort_order:"desc"
# Expected: Medium priority tasks, longest estimate first

# Search + Priority + Sort
mcp__todo-mcp__todo_list search:"" priority:"high" sort_by:"created"
# Expected: High priority tasks in creation order

# With limit
mcp__todo-mcp__todo_list sort_by:"priority" sort_order:"desc" limit:3
# Expected: Top 3 priority tasks only
```

### 2.8 Tag Display and Management
```bash
# Create tasks with embedded tags
mcp__todo-mcp__todo_create content:"Fix bug #123" tags:["bug","critical","backend"] priority:"high" estimate_minutes:120
# Expected: "Created task ¬´#9¬ª: Fix bug #123" (note guillemets in output)

mcp__todo-mcp__todo_create content:"Add feature #456" tags:["feature","frontend","v0.6.8"] priority:"medium" estimate_minutes:180
# Expected: "Created task ¬´#10¬ª: Add feature #456"

mcp__todo-mcp__todo_create content:"Review PR #789" tags:["review","documentation"] priority:"low" estimate_minutes:30
# Expected: "Created task ¬´#11¬ª: Review PR #789"

# List tasks - tags should be visible in output (multi-line STF format)
mcp__todo-mcp__todo_list
# Expected output format (multi-line STF):
# 9. ‚óã üî¥ Fix bug #123 (est: 2h) ¬´#9¬ª
#    üè∑Ô∏è #bug #critical #backend
# 10. ‚óã üü° Add feature #456 (est: 3h) ¬´#10¬ª
#     üè∑Ô∏è #feature #frontend #v0.6.8
# 11. ‚óã üü¢ Review PR #789 (est: 30m) ¬´#11¬ª
#     üè∑Ô∏è #review #documentation
# NOTE: Tags MUST be on separate lines with 3-space indent and üè∑Ô∏è emoji

# Filter by tags
mcp__todo-mcp__todo_list tags:["backend"]
# Expected: Only task #9 shown

mcp__todo-mcp__todo_list tags:["frontend","feature"]
# Expected: Only task #10 shown (has both tags)

# Search within tags
mcp__todo-mcp__todo_list search:"critical"
# Expected: Task #9 found (search includes tags)

# Update task with new tags
mcp__todo-mcp__todo_update task_id:"#9" tags:["bug","urgent","backend","database"]
# Expected: "Updated task ¬´#9¬ª: Fix bug #123"

# Verify tag update
mcp__todo-mcp__todo_list
# Expected: Task #9 now shows [bug, urgent, backend, database]

# Remove all tags from a task
mcp__todo-mcp__todo_update task_id:"#11" tags:[]
# Expected: "Updated task ¬´#11¬ª: Review PR #789"

# Verify tag removal
mcp__todo-mcp__todo_list
# Expected: Task #11 shows no tags (no [] displayed for empty tags)
```

### 2.10 Advanced Tag Features
```bash
# Test tag coalescence (85% similarity threshold)
mcp__todo-mcp__todo_create content:"Test backend" tags:["backend"] estimate_minutes:60
mcp__todo-mcp__todo_tag_add position_id:1 tags:["back-end", "back_end"]
# Expected: Tags should coalesce to single "backend" (avoiding near-duplicates)

# Test tag operations with position and task_id
mcp__todo-mcp__todo_tag_add task_id:"#12" tags:["urgent", "priority"]
# Expected: Tags added successfully

mcp__todo-mcp__todo_tag_remove position_id:1 tags:["urgent"]
# Expected: Tag removed successfully

# Test filtering by multiple tags
mcp__todo-mcp__todo_list tags:["backend", "urgent"]
# Expected: Only tasks with BOTH tags shown

# Test tag search functionality
mcp__todo-mcp__todo_list search:"backend"
# Expected: Finds tasks with "backend" in tags OR content

# Test bulk tag operations with filters
mcp__todo-mcp__todo_bulk operation:"add_tags" filters:{priority:"high"} data:{tags:["sprint-1"]}
# Expected: All high priority tasks get "sprint-1" tag

# Verify tag display in multi-line STF
mcp__todo-mcp__todo_list
# Expected: Tags shown on second line with üè∑Ô∏è emoji and 3-space indent:
# 1. ‚óã üî¥ Task content ¬´#N¬ª
#    üè∑Ô∏è #tag1 #tag2 #tag3
```

### 2.9 Tag Auto-Extraction from Content
```bash
# IMPORTANT: Tests automatic tag extraction from task content using # notation

# Test 1: Inline tags (# removed, word stays)
mcp__todo-mcp__todo_create content:"Fix the #bug in the parser" estimate_minutes:60
# Expected: 
# - Created task shows: "Fix the bug in the parser"
# - Tags extracted: [bug]

# Test 2: Multiple inline tags (last tag treated as trailing)
mcp__todo-mcp__todo_create content:"Fix the #bug and improve #performance in the #backend" estimate_minutes:90
# Expected:
# - Created task shows: "Fix the bug and improve performance in the" 
# - Tags extracted: [bug, performance, backend]
# - Note: #backend at end is treated as trailing tag (removed completely)

# Test 3: Trailing tags (both # and words removed from end)
mcp__todo-mcp__todo_create content:"Fix the parser bug #urgent #backend" estimate_minutes:120
# Expected:
# - Created task shows: "Fix the parser bug"
# - Tags extracted: [urgent, backend]

# Test 4: Mixed inline and trailing tags
mcp__todo-mcp__todo_create content:"Fix the #bug in parser #critical #hotfix" estimate_minutes:60
# Expected:
# - Created task shows: "Fix the bug in parser"
# - Tags extracted: [bug, critical, hotfix]

# Test 5: Markdown headers (# with space - NOT extracted)
mcp__todo-mcp__todo_create content:"# This is a header\nWith some content" estimate_minutes:30
# Expected:
# - Created task shows: "# This is a header\nWith some content" (unchanged)
# - Tags extracted: [] (none)

# Test 6: Mixed markdown and tags
mcp__todo-mcp__todo_create content:"# Header\nFix the #bug here" estimate_minutes:45
# Expected:
# - Created task shows: "# Header\nFix the bug here"
# - Tags extracted: [bug]

# Test 7: Case normalization
mcp__todo-mcp__todo_create content:"Fix #Bug with #CRITICAL priority #Backend" estimate_minutes:60
# Expected:
# - Created task shows: "Fix Bug with CRITICAL priority" (trailing removed)
# - Tags extracted: [bug, critical, backend] (normalized to lowercase)

# Test 8: Duplicate tags (should deduplicate)
mcp__todo-mcp__todo_create content:"Fix the #bug that causes another #bug issue" estimate_minutes:90
# Expected:
# - Created task shows: "Fix the bug that causes another bug issue"
# - Tags extracted: [bug] (deduplicated)
# - Optional: Warning about duplicate tag

# Test 9: Tags with hyphens and underscores (last tag trailing)
mcp__todo-mcp__todo_create content:"Implement #code-review for #user_story with #high-priority" estimate_minutes:180
# Expected:
# - Created task shows: "Implement code-review for user_story with" (trailing removed)
# - Tags extracted: [code-review, user_story, high-priority]
# - Note: #high-priority at end treated as trailing tag

# Test 10: Tags in quotes (NOT extracted)
mcp__todo-mcp__todo_create content:"Error message shows '#failed' in logs" estimate_minutes:45
# Expected:
# - Created task shows: "Error message shows '#failed' in logs" (unchanged)
# - Tags extracted: [] (none - quoted text ignored)

# Test 11: Mixed quotes and real tags
mcp__todo-mcp__todo_create content:"Fix '#error' message #bug #frontend" estimate_minutes:60
# Expected:
# - Created task shows: "Fix '#error' message"
# - Tags extracted: [bug, frontend] (quoted '#error' ignored)

# Test 12: Invalid tags (numbers only, special chars)
mcp__todo-mcp__todo_create content:"Issue #123 needs fixing #2.0 #@special" estimate_minutes:30
# Expected:
# - Created task shows: "Issue #123 needs fixing #2.0 #@special" (unchanged)
# - Tags extracted: [] (none - invalid tag formats)

# Test 13: Edge case - tag at very end with no space
mcp__todo-mcp__todo_create content:"Quick fix#bug" estimate_minutes:15
# Expected:
# - Created task shows: "Quick fix#bug" (unchanged - no space before #)
# - Tags extracted: [] (none - requires space before #)

# Test 14: Natural phrasing recommendations (better alternatives)
mcp__todo-mcp__todo_create content:"Fix backend issues #urgent #critical" estimate_minutes:90
# Expected:
# - Created task shows: "Fix backend issues" (trailing tags removed)
# - Tags extracted: [urgent, critical]
# - Note: This phrasing works well - tags clearly appended as labels

# Test 15: Unicode tag support
mcp__todo-mcp__todo_create content:"Fix #syst√®me database #„Éá„Éº„Çø„Éô„Éº„Çπ" estimate_minutes:120  
# Expected:
# - Created task shows: "Fix syst√®me database" (trailing tag removed)
# - Tags extracted: [syst√®me, „Éá„Éº„Çø„Éô„Éº„Çπ] (Unicode letters supported)

# Verify all extracted tags with list
mcp__todo-mcp__todo_list
# Expected: Each task shows with its auto-extracted tags in [brackets]
# Format: N. ‚óã [priority] [content without inline #] [extracted tags] (est: Xh) ¬´#ID¬ª
```

---

## Section 3: Bulk Operations

### 3.1 Setup for Bulk Tests
```bash
# Clear and create test set
mcp__todo-mcp__todo_clear_all force:true
mcp__todo-mcp__todo_create content:"Bulk test 1" priority:"low" estimate_minutes:30
mcp__todo-mcp__todo_create content:"Bulk test 2" priority:"low" estimate_minutes:45
mcp__todo-mcp__todo_create content:"Bulk test 3" priority:"low" estimate_minutes:60
mcp__todo-mcp__todo_create content:"Other task 1" priority:"medium" estimate_minutes:90
mcp__todo-mcp__todo_create content:"Other task 2" priority:"high" estimate_minutes:120
```

### 3.2 Bulk Priority Update
```bash
# Update all low priority to medium
mcp__todo-mcp__todo_bulk action:"priority" filter:{priority:"low"} value:"medium"
# Expected: "üì¶ Bulk operation completed. Affected 3 tasks"

# Verify change
mcp__todo-mcp__todo_list priority:"low"
# Expected: No tasks (all updated to medium)

mcp__todo-mcp__todo_list priority:"medium"
# Expected: 4 tasks (#1-4)
```

### 3.3 Bulk Tag Operations
```bash
# Add tags to all bulk test tasks
mcp__todo-mcp__todo_bulk operation:"add_tags" filters:{status:"created"} data:{tags:["testing","v0.6.8"]}
# Expected: "Successfully performed add_tags on N tasks"

# Verify tags were added
mcp__todo-mcp__todo_list search:"bulk test"
# Expected: All tasks show [testing, v0.6.8] in their display

# Add more tags to specific tasks
mcp__todo-mcp__todo_bulk operation:"add_tags" task_ids:[1,2,3] data:{tags:["priority-test"]}
# Expected: "Successfully performed add_tags on 3 tasks"

# Verify combined tags
mcp__todo-mcp__todo_list
# Expected: First 3 tasks show [testing, v0.6.8, priority-test]

# Remove specific tags
mcp__todo-mcp__todo_bulk operation:"remove_tags" filters:{tags:["priority-test"]} data:{tags:["testing"]}
# Expected: "Successfully performed remove_tags on 3 tasks"

# Verify tag removal
mcp__todo-mcp__todo_list
# Expected: First 3 tasks now show [v0.6.8, priority-test] (testing removed)
```

### 3.4 Bulk Status Changes
```bash
# Start multiple tasks by filter
mcp__todo-mcp__todo_bulk action:"status" filter:{search:"bulk test"} value:"in_progress"
# Expected: All 3 bulk test tasks now in progress

# Complete all in-progress tasks
mcp__todo-mcp__todo_bulk action:"status" filter:{status:"in_progress"} value:"completed"
# Expected: All in-progress tasks completed

# Verify
mcp__todo-mcp__todo_list status:"completed"
# Expected: Shows 3 completed tasks
```

### 3.5 Bulk with Specific IDs
```bash
# Update specific tasks by ID
mcp__todo-mcp__todo_bulk action:"priority" task_ids:["#4","#5"] value:"critical"
# Expected: "üì¶ Bulk operation completed. Affected 2 tasks"

# Verify only specified tasks updated
mcp__todo-mcp__todo_list priority:"critical"
# Expected: Tasks #4 and #5 only
```

### 3.6 Bulk Operation Atomicity
```bash
# Attempt bulk with one invalid ID (should rollback)
mcp__todo-mcp__todo_bulk action:"priority" task_ids:["#4","#999","#5"] value:"low"
# Expected: Error, no tasks updated (atomic rollback)

# Verify no changes
mcp__todo-mcp__todo_list priority:"low"
# Expected: No tasks (rollback worked)
```

### 3.7 Batch Create Operations (Normal Use Cases)
```bash
# Test normal batch create with 5-10 tasks
mcp__todo-mcp__todo_batch_create tasks:[
  {content:"Sprint planning", priority:"high", estimate_minutes:60},
  {content:"Code review", priority:"medium", estimate_minutes:45},
  {content:"Bug fix", priority:"critical", estimate_minutes:120},
  {content:"Documentation", priority:"low", estimate_minutes:30},
  {content:"Testing", priority:"high", estimate_minutes:90}
]
# Expected: "‚úÖ Created 5 tasks"

# Test batch create with tags
mcp__todo-mcp__todo_batch_create tasks:[
  {content:"Frontend task", tags:["ui","react"], estimate_minutes:60},
  {content:"Backend task", tags:["api","database"], estimate_minutes:90}
]
# Expected: "‚úÖ Created 2 tasks"

# Test batch create with markdown input
mcp__todo-mcp__todo_batch_create markdown:"
- [ ] Task one (30m)
- [ ] Task two (45m)
- [ ] Task three (60m)
"
# Expected: "‚úÖ Created 3 tasks"

# Test batch create error handling (missing required fields)
mcp__todo-mcp__todo_batch_create tasks:[
  {content:"Valid task", estimate_minutes:30},
  {content:""},  # Invalid - empty content
  {content:"Another valid", estimate_minutes:45}
]
# Expected: Error - batch operation should be atomic (all or nothing)
```

---

## Section 4: Export Functionality

### 4.1 Markdown Export
```bash
mcp__todo-mcp__todo_export format:"markdown"
# Expected: 
# - Success message with file path: "üì§ Exported N tasks to tasks/exports/export_YYYYMMDD_HHMMSS.md"
# - File contains markdown checklist format
# - Sections for different statuses
```

### 4.2 JSON Export
```bash
mcp__todo-mcp__todo_export format:"json"
# Expected:
# - File path: tasks/exports/export_YYYYMMDD_HHMMSS.json
# - Valid JSON structure
# - All task fields preserved
```

### 4.3 CSV Export
```bash
mcp__todo-mcp__todo_export format:"csv"
# Expected:
# - File path: tasks/exports/export_YYYYMMDD_HHMMSS.csv
# - CSV with headers
# - Properly escaped fields
```

### 4.4 Org-mode Export
```bash
mcp__todo-mcp__todo_export format:"org"
# Expected:
# - File path: tasks/exports/export_YYYYMMDD_HHMMSS.org
# - Org-mode TODO/DONE format
# - Properties drawer with metadata
```

### 4.5 Export Options
```bash
# Export only active tasks
mcp__todo-mcp__todo_export format:"markdown" include_completed:false
# Expected: File contains only non-completed tasks

# Export all including completed
mcp__todo-mcp__todo_export format:"json" include_completed:true
# Expected: File contains all tasks
```

---

## Section 5: Safe Archive

### 5.1 Basic Archive Operation
```bash
# Setup: Create and complete tasks
mcp__todo-mcp__todo_clear_all force:true
mcp__todo-mcp__todo_create content:"Task to archive 1" estimate_minutes:30
mcp__todo-mcp__todo_create content:"Task to archive 2" estimate_minutes:45
mcp__todo-mcp__todo_create content:"Keep this active" estimate_minutes:60
mcp__todo-mcp__todo_complete position_id:1
mcp__todo-mcp__todo_complete position_id:1  # Now completes original position 2

# Archive completed tasks
mcp__todo-mcp__todo_archive
# Expected:
# - "üì¶ Archived 2 completed tasks"
# - "Exported to: tasks/archives/archive_YYYYMMDD_HHMMSS.md"
```

### 5.2 Verify Archive Results
```bash
# Check completed tasks are gone
mcp__todo-mcp__todo_list status:"completed"
# Expected: No completed tasks

# VERIFICATION: If shows "No tasks found", verify archive actually worked:
mcp__todo-mcp__todo_list
# Should show only active tasks remaining
# If this also shows "No tasks found", check if archive deleted everything (BUG)

# Check active task remains
mcp__todo-mcp__todo_list
# Expected: Only "Keep this active" task remains
```

### 5.3 Archive with Format Choice
```bash
# Complete another task
mcp__todo-mcp__todo_complete position_id:1

# Archive as JSON
mcp__todo-mcp__todo_archive format:"json"
# Expected: Archive created in JSON format
```

---

## Section 6: Export/Restore Testing (Using project_restore)

### 6.1 Export/Restore Round Trip
```bash
# Export current tasks
mcp__todo-mcp__todo_export format:"json"
# Note the file path returned

# Clear database
mcp__todo-mcp__todo_clear_all force:true

# Restore from export using project_restore
mcp__todo-mcp__project_restore file_path:"[path from export]" mode:"replace"
# Expected: Tasks restored from export file

# Verify restoration
mcp__todo-mcp__todo_list
# Expected: All tasks restored with same properties
```

### 6.2 Restore Modes
```bash
# Create some tasks
mcp__todo-mcp__todo_create content:"Existing task 1"
mcp__todo-mcp__todo_create content:"Existing task 2"

# Restore with merge (adds to existing)
mcp__todo-mcp__project_restore file_path:"[export file]" mode:"merge"
# Expected: New tasks added, existing preserved

# Restore with replace (clears first)
mcp__todo-mcp__project_restore file_path:"[export file]" mode:"replace"
# Expected: Existing cleared, only restored tasks remain

# Restore with validate (dry run)
mcp__todo-mcp__project_restore file_path:"[export file]" mode:"validate"
# Expected: Validation report, no changes made
```

### 6.3 Format Compatibility
```bash
# Test restore from different export formats
mcp__todo-mcp__todo_export format:"json"
mcp__todo-mcp__project_restore file_path:"[json file]" mode:"validate"
# Expected: JSON format accepted

mcp__todo-mcp__todo_export format:"csv"
mcp__todo-mcp__project_restore file_path:"[csv file]" mode:"validate"
# Expected: CSV format accepted or clear error
```

### 6.4 Export/Import Round-Trip Validation (CRITICAL)
**Purpose**: Validate complete data integrity through export‚Üíimport cycle and teach Claude this workflow exists.

```bash
# STEP 1: Create diverse test dataset
mcp__todo-mcp__todo_create content:"Fix critical #bug in #auth system" priority:"critical" estimate_minutes:120
mcp__todo-mcp__todo_create content:"Add #feature for #frontend" priority:"high" estimate_minutes:180 tags:["ui","enhancement"]
mcp__todo-mcp__todo_create content:"Review #documentation updates" priority:"medium" estimate_minutes:45

# Start and pause some tasks to get varied states
mcp__todo-mcp__todo_start position_id:1
mcp__todo-mcp__todo_pause position_id:1 reason:"Waiting for review"
mcp__todo-mcp__todo_complete position_id:3

# Get original task count and state
mcp__todo-mcp__todo_list
# Record: task count, IDs, statuses, priorities, tags, timing

# STEP 2: Export current project state
mcp__todo-mcp__project_dump
# Expected: "Project backed up to tasks/dumps/dump_[timestamp].json"
# Record the exact file path returned

# STEP 3: Simulate data loss - clear all tasks
mcp__todo-mcp__todo_clear_all force:true
mcp__todo-mcp__todo_list
# Expected: "No tasks found" - confirm complete clearing

# STEP 4: Restore from backup using returned file path
mcp__todo-mcp__project_restore file_path:"tasks/dumps/dump_[timestamp].json" mode:"replace"
# Expected: "‚úÖ Restored N tasks from backup"

# STEP 5: Validate perfect restoration
mcp__todo-mcp__todo_list
# CRITICAL VALIDATION:
# - Same task count as before clearing
# - All task content preserved exactly
# - All priorities preserved (‚ö°üî¥üü°üü¢üîµ)
# - All statuses preserved (‚óã‚óê‚äò‚óè)
# - All tags preserved and displayed correctly
# - All timing information preserved
# - All task IDs may change (that's expected)
# - Multi-line STF format still works correctly

# STEP 6: Test incremental import (merge mode)
mcp__todo-mcp__todo_create content:"New task after restore" priority:"low" estimate_minutes:30
mcp__todo-mcp__project_restore file_path:"tasks/dumps/dump_[timestamp].json" mode:"merge"  
# Expected: Original tasks + new task preserved

# STEP 7: Test validation mode (dry run)
mcp__todo-mcp__project_restore file_path:"tasks/dumps/dump_[timestamp].json" mode:"validate"
# Expected: Validation report without making changes
```

**CRITICAL SUCCESS CRITERIA:**
- ‚úÖ Export creates valid dump file
- ‚úÖ Clear operation removes all data
- ‚úÖ Restore completely recovers all task data
- ‚úÖ Tags display correctly in multi-line STF format
- ‚úÖ All statuses and priorities preserved
- ‚úÖ Timing information intact
- ‚úÖ Merge mode preserves existing + adds restored
- ‚úÖ Validate mode provides feedback without changes

**This test teaches Claude that:**
1. `project_dump` + `project_restore` provide complete backup/recovery
2. The workflow can recover from any data loss scenario
3. Multiple restore modes support different use cases
4. Export/import maintains perfect data integrity
5. This is the recommended way to transfer tasks between environments

### 6.5 Custom Task Import via Manual Dump Creation (ADVANCED)
**Purpose**: Test Claude's ability to create custom task sets by writing dump files directly.

```bash
# STEP 1: Create empty project state
mcp__todo-mcp__todo_clear_all force:true

# STEP 2: Claude creates a custom dump file with desired task structure
# (In real usage, Claude would create this file via Write tool with custom tasks)
# Test file should contain valid dump format with:
# - Mixed priorities and estimates
# - Pre-assigned tags  
# - Various statuses (some completed for testing)
# - Unicode content for international testing

# Example structure Claude should create:
# {
#   "metadata": {"version": "0.6.8", "exported_at": "2025-08-11T12:00:00Z"},
#   "tasks": [
#     {"content": "Setup development environment", "priority": 4, "estimate_minutes": 60, "status": "completed", "tags": ["setup", "dev"]},
#     {"content": "Implement user authentication", "priority": 4, "estimate_minutes": 180, "status": "created", "tags": ["auth", "security"]},
#     {"content": "Create unit tests", "priority": 3, "estimate_minutes": 120, "status": "created", "tags": ["testing", "quality"]}
#   ]
# }

# STEP 3: Import the custom-created dump file  
mcp__todo-mcp__project_restore file_path:"custom_tasks.json" mode:"replace"
# Expected: "‚úÖ Restored N tasks from backup"

# STEP 4: Validate custom import worked correctly
mcp__todo-mcp__todo_list
# Expected multi-line STF showing:
# 1. ‚óè üî¥ Setup development environment (actual: 1h) ¬´#1¬ª
#    üè∑Ô∏è #setup #dev  
# 2. ‚óã üî¥ Implement user authentication (est: 3h) ¬´#2¬ª
#    üè∑Ô∏è #auth #security
# 3. ‚óã üü° Create unit tests (est: 2h) ¬´#3¬ª 
#    üè∑Ô∏è #testing #quality

# STEP 5: Test next task recommendation with imported tasks
mcp__todo-mcp__todo_next
# Expected: Should recommend highest priority incomplete task with reasoning

# STEP 6: Test workflow continues normally with imported tasks
mcp__todo-mcp__todo_start task_id:2
mcp__todo-mcp__todo_list
# Expected: Task #2 shows as in_progress with timing
```

**ADVANCED SUCCESS CRITERIA:**
- ‚úÖ Claude can create valid dump files manually
- ‚úÖ Custom dump files import successfully
- ‚úÖ All task properties preserved from custom file
- ‚úÖ Tags display correctly in multi-line STF format  
- ‚úÖ Mixed statuses (completed/pending) work correctly
- ‚úÖ Task workflow continues normally with imported data
- ‚úÖ Next task logic works with imported priorities

**This advanced test teaches Claude that:**
1. Dump files are just JSON - Claude can create them directly
2. Custom task templates can be built and imported
3. Project bootstrapping is possible via custom dumps  
4. Complex task structures can be pre-built and shared
5. The import system is flexible enough for custom workflows

---

## Section 6.6: Dependency & Sequence System Testing (FUTURE IMPLEMENTATION)
**Purpose**: Validate task dependency management, sequence ordering, and their interaction with priority.
**Note**: This section tests dependency and sequence functionality if/when implemented.

```bash
# STEP 1: Create tasks for comprehensive dependency and sequence testing
mcp__todo-mcp__todo_create content:"Setup database schema" priority:"high" estimate_minutes:60
mcp__todo-mcp__todo_create content:"Create user model" priority:"high" estimate_minutes:90  
mcp__todo-mcp__todo_create content:"Setup API framework" priority:"high" estimate_minutes:45
mcp__todo-mcp__todo_create content:"Implement user authentication" priority:"medium" estimate_minutes:120
mcp__todo-mcp__todo_create content:"Add user registration" priority:"medium" estimate_minutes:90
mcp__todo-mcp__todo_create content:"Create admin dashboard" priority:"low" estimate_minutes:180
mcp__todo-mcp__todo_create content:"Write API documentation" priority:"low" estimate_minutes:120

# STEP 2: Establish dependency relationships
# Task 2 depends on Task 1 (user model needs database schema)
mcp__todo-mcp__todo_update task_id:2 dependencies:["#1"]
# Task 4 depends on both Task 2 and 3 (auth needs model and API framework)
mcp__todo-mcp__todo_update task_id:4 dependencies:["#2","#3"] 
# Task 5 depends on Task 4 (registration needs auth)
mcp__todo-mcp__todo_update task_id:5 dependencies:["#4"]
# Task 6 depends on Task 4 and 5 (admin needs auth and registration)
mcp__todo-mcp__todo_update task_id:6 dependencies:["#4","#5"]
# Task 7 depends on Task 3 (docs need API framework)
mcp__todo-mcp__todo_update task_id:7 dependencies:["#3"]

# STEP 3: Set sequence ordering (priority within same dependency level)
# Within independent tasks (1,3): database first, then API
mcp__todo-mcp__todo_update task_id:1 sequence:1
mcp__todo-mcp__todo_update task_id:3 sequence:2
# Within dependent tasks: order by business value
mcp__todo-mcp__todo_update task_id:4 sequence:1  # Auth most critical
mcp__todo-mcp__todo_update task_id:5 sequence:2  # Registration next
mcp__todo-mcp__todo_update task_id:7 sequence:3  # Docs can wait
mcp__todo-mcp__todo_update task_id:6 sequence:4  # Admin last

# STEP 4: Validate dependency and sequence display in multi-line STF  
mcp__todo-mcp__todo_list
# Expected multi-line STF ordered by: dependencies first, then sequence, then priority:
# 1. ‚óã üî¥ Setup database schema (seq: 1, est: 1h) ¬´#1¬ª
# 2. ‚óã üî¥ Setup API framework (seq: 2, est: 45m) ¬´#3¬ª  
# 3. ‚óã üî¥ Create user model (seq: default, est: 1h 30m) ¬´#2¬ª
#    ‚õî Blocked by: ¬´#1¬ª
# 4. ‚óã üü° Implement user authentication (seq: 1, est: 2h) ¬´#4¬ª
#    ‚õî Blocked by: ¬´#2¬ª, ¬´#3¬ª
# 5. ‚óã üü° Add user registration (seq: 2, est: 1h 30m) ¬´#5¬ª
#    ‚õî Blocked by: ¬´#4¬ª
# 6. ‚óã üü¢ Write API documentation (seq: 3, est: 2h) ¬´#7¬ª
#    ‚õî Blocked by: ¬´#3¬ª
# 7. ‚óã üü¢ Create admin dashboard (seq: 4, est: 3h) ¬´#6¬ª
#    ‚õî Blocked by: ¬´#4¬ª, ¬´#5¬ª

# STEP 5: Test todo_next respects dependencies AND sequence
mcp__todo-mcp__todo_next
# Expected: Should recommend Task #1 (sequence 1, no dependencies)
# Should NOT recommend Task #3 yet (sequence 2, even though unblocked)
# Should NOT recommend any blocked tasks (2,4,5,6,7)

# STEP 6: Complete first task and test sequence-aware next task
mcp__todo-mcp__todo_start task_id:1  
mcp__todo-mcp__todo_complete task_id:1

mcp__todo-mcp__todo_next
# Expected: Should now recommend Task #3 (sequence 2, now highest priority unblocked)
# Should NOT recommend Task #2 (sequence default, lower than #3's sequence 2)

# STEP 7: Complete prerequisite chain and test complex unblocking
mcp__todo-mcp__todo_start task_id:3
mcp__todo-mcp__todo_complete task_id:3
mcp__todo-mcp__todo_start task_id:2  
mcp__todo-mcp__todo_complete task_id:2

mcp__todo-mcp__todo_list
# Expected: Multiple tasks now unblocked, ordered by sequence
# 1. ‚óè üî¥ Setup database schema (actual: Xm) ¬´#1¬ª
#    ‚û§ Unblocks: ¬´#2¬ª
# 2. ‚óè üî¥ Create user model (actual: Xm) ¬´#2¬ª
#    ‚û§ Unblocks: ¬´#4¬ª
# 3. ‚óè üî¥ Setup API framework (actual: Xm) ¬´#3¬ª
#    ‚û§ Unblocks: ¬´#4¬ª, ¬´#7¬ª
# 4. ‚óã üü° Implement user authentication (seq: 1, est: 2h) ¬´#4¬ª
#    (now unblocked - highest sequence priority)
# 5. ‚óã üü¢ Write API documentation (seq: 3, est: 2h) ¬´#7¬ª
#    (now unblocked)
# 6. ‚óã üü° Add user registration (seq: 2, est: 1h 30m) ¬´#5¬ª
#    ‚õî Blocked by: ¬´#4¬ª (still blocked)
# 7. ‚óã üü¢ Create admin dashboard (seq: 4, est: 3h) ¬´#6¬ª
#    ‚õî Blocked by: ¬´#4¬ª, ¬´#5¬ª (still blocked)

mcp__todo-mcp__todo_next
# Expected: Should recommend Task #4 (sequence 1, highest priority among unblocked)

# STEP 8: Test sequence ordering with list sorting
mcp__todo-mcp__todo_list sort_by:"sequence" sort_order:"asc" 
# Expected: Tasks ordered by sequence (1,2,3,4), with unset sequence last
# Blocked tasks should still show dependencies

# STEP 9: Test circular dependency detection
mcp__todo-mcp__todo_update task_id:7 dependencies:["#6"]
# This would create: #7‚Üí#6‚Üí#4‚Üí#2‚Üí#1 and #7‚Üí#6‚Üí#5‚Üí#4‚Üí#3, but #6‚Üí#5‚Üí#4 already exists
mcp__todo-mcp__todo_update task_id:1 dependencies:["#7"] 
# Expected: Error - "Circular dependency detected: #1 ‚Üí #7 ‚Üí #6 ‚Üí #4 ‚Üí #2 ‚Üí #1"

# STEP 10: Test dependency removal and sequence adjustment
mcp__todo-mcp__todo_update task_id:6 dependencies:[] # Remove all dependencies
mcp__todo-mcp__todo_update task_id:6 sequence:0      # Move to highest sequence priority
mcp__todo-mcp__todo_next
# Expected: Should now recommend Task #6 (sequence 0 = highest, no dependencies)

# STEP 11: Test deletion protection with complex dependencies
mcp__todo-mcp__todo_delete task_id:4
# Expected: Error - "Task ¬´#4¬ª has dependents: ¬´#5¬ª, ¬´#6¬ª. Complete or remove dependencies first."

# STEP 12: Test bulk sequence reordering
mcp__todo-mcp__todo_bulk_update task_ids:["#5","#6","#7"] sequence_values:[1,2,3]
# Expected: All three tasks get new sequence values
mcp__todo-mcp__todo_list sort_by:"sequence"
# Expected: Updated sequence order reflected in list
```

**DEPENDENCY & SEQUENCE SUCCESS CRITERIA:**
- ‚úÖ Dependencies can be added/removed via todo_update
- ‚úÖ Sequence values can be set and affect task ordering  
- ‚úÖ Blocked tasks show ‚õî with dependency IDs in multi-line STF
- ‚úÖ Completed tasks show ‚û§ with unblocked task IDs
- ‚úÖ todo_next respects both dependencies AND sequence ordering
- ‚úÖ List sorting by sequence works correctly
- ‚úÖ Complex dependency chains (multi-level) work correctly
- ‚úÖ Completing dependencies automatically unblocks dependents
- ‚úÖ Circular dependency detection prevents invalid chains
- ‚úÖ Deletion protection for tasks with dependents  
- ‚úÖ Bulk operations can update sequences efficiently
- ‚úÖ Dependency removal works correctly

**This comprehensive test teaches Claude that:**
1. Dependencies create logical task ordering constraints
2. Sequence provides priority ordering within dependency levels
3. todo_next uses sophisticated logic: dependencies ‚Üí sequence ‚Üí priority
4. The system automatically manages complex blocking/unblocking relationships
5. Circular dependencies are prevented even in complex chains
6. Task deletion considers downstream dependencies
7. Bulk operations support efficient project restructuring
8. The multi-line STF format clearly shows all relationship information

---

## Section 7: Context Management Enhancements

### 7.1 Pattern-Based Deletion (NOW IMPLEMENTED)
```bash
# Setup: Create multiple context keys
mcp__todo-mcp__context_set key:"temp_session_1" value:"value1"
mcp__todo-mcp__context_set key:"temp_session_2" value:"value2"
mcp__todo-mcp__context_set key:"temp_debug_1" value:"debug1"
mcp__todo-mcp__context_set key:"important_data" value:"keep this"
mcp__todo-mcp__context_set key:"temporary_work" value:"delete me"
mcp__todo-mcp__context_set key:"session_data" value:"keep this too"

# Delete by pattern - should delete all starting with "temp"
mcp__todo-mcp__context_delete pattern:"temp*"
# Expected: "üóëÔ∏è Deleted 3 context keys matching 'temp*'"
# Should delete: temp_session_1, temp_session_2, temp_debug_1

# Delete by more specific pattern
mcp__todo-mcp__context_delete pattern:"temp_session_*"
# Expected: Error if already deleted, or deletes matching keys

# Verify important data preserved
mcp__todo-mcp__context_get key:"important_data"
# Expected: "keep this"

# Verify temp keys deleted
mcp__todo-mcp__context_get key:"temp_session_1"
# Expected: Error - key not found

# Test wildcard patterns
mcp__todo-mcp__context_delete pattern:"*_data"
# Expected: Deletes keys ending with "_data"

# Verify what remains
mcp__todo-mcp__context_get_all
# Expected: Shows only keys that didn't match patterns
```

### 7.2 Context Statistics
```bash
# Add various sized values
mcp__todo-mcp__context_set key:"small" value:"x"
mcp__todo-mcp__context_set key:"medium" value:"[100 character string]"
mcp__todo-mcp__context_set key:"large" value:"[500 character string]"

# Get statistics
mcp__todo-mcp__context_stats
# Expected:
# - Total keys: N
# - Total size: N bytes
# - Largest key: [name]
# - Largest value: [key name] (N bytes)
```

### 7.3 Enhanced context_resume
```bash
# Setup complex state with multiple prefixes
mcp__todo-mcp__context_set key:"lesson_estimation" value:"Task #31 took 8m vs 6h estimated"
mcp__todo-mcp__context_set key:"lesson_testing" value:"Always verify empty states"
mcp__todo-mcp__context_set key:"temp_session_id" value:"abc123"
mcp__todo-mcp__context_set key:"temp_current_task" value:"Testing v0.6.8 features"
mcp__todo-mcp__context_set key:"workaround_bulk" value:"Use position_id not task_id"
mcp__todo-mcp__todo_create content:"Test task in progress" estimate_minutes:60
mcp__todo-mcp__todo_create content:"Test task pending" priority:"high"
mcp__todo-mcp__todo_start position_id:1

# Get full resume
mcp__todo-mcp__context_resume
# Expected format (v0.6.8 NEW):
# üß† WHERE WAS I?
# =============
# 
# üìù Working Memory:
#    Context Keys by Category:
#    ‚Ä¢ lesson_*: 2 key(s) (newest: Xs ago)
#    ‚Ä¢ temp_*: 2 key(s) (newest: Xs ago)
#    ‚Ä¢ workaround_*: 1 key(s) (newest: Xs ago)
#    Total: 5 keys
#    
#    Recent Keys:
#    ‚Ä¢ lesson_estimation: Task #31 took 8m vs 6h estimated (Xs old)
#    ‚Ä¢ lesson_testing: Always verify empty states (Xs old)
#    ‚Ä¢ temp_session_id: abc123 (Xs old)
#
# ‚óê In Progress:
# 1. Test task in progress (elapsed: Xm) ¬´#N¬ª
#
# üìå Pending (next up):
# 2. Test task pending ¬´#N¬ª
#
# üìä Summary:
#   ‚Ä¢ 1 task(s) in progress
#   ‚Ä¢ 1 task(s) pending

# CRITICAL VERIFICATION: context_resume should ALWAYS show context groups if keys exist
mcp__todo-mcp__context_get_all
# Verify that context_resume properly showed the grouped keys with ages
# If context_get_all shows keys but context_resume showed "(empty)", 
# this is a BUG - context_resume is not reading/grouping context correctly
```

---

## Section 8: Performance Analysis (OPTIONAL - ONLY WHEN REQUESTED)

**NOTE: Performance testing is ONLY run when specifically requested, typically at release time for system characterization.**
**DO NOT include in regular test runs.**

When requested, performance testing should:
- Record actual response times for analysis
- Note any operations that seem unusually slow (>1 second for simple operations)
- Only flag as issue if performance is genuinely problematic (e.g., >5 seconds for basic list)
- Results will inform future optimization decisions

### 8.1 Response Time Baseline
```bash
# Create 100 tasks for performance testing
for i in {1..100}; do
  mcp__todo-mcp__todo_create content:"Performance test $i" estimate_minutes:30
done

# Test list performance
# TIME START
mcp__todo-mcp__todo_list
# TIME END
# RECORD: Actual response time (e.g., "87ms")
# ANALYSIS: Is this reasonable for 100 tasks? Any perceived lag?

# Test search performance on 100 tasks
# TIME START
mcp__todo-mcp__todo_list search:"test"
# TIME END
# RECORD: Actual response time
# ANALYSIS: Search overhead compared to plain list?

# Test bulk operation on 100 tasks
# TIME START
mcp__todo-mcp__todo_bulk action:"priority" filter:{search:"performance"} value:"medium"
# TIME END
# RECORD: Actual response time
# ANALYSIS: Reasonable for updating 100 tasks?
```

### 8.2 Large Dataset Performance
```bash
# If time permits, test with 1000 tasks
# Create 1000 tasks...

# Export performance
# TIME START
mcp__todo-mcp__todo_export format:"json"
# TIME END
# RECORD: Actual time for 1000 tasks
# ANALYSIS: Does export scale linearly? Any memory issues?
```

### 8.3 Performance Report Format
```markdown
## Performance Analysis
- **100 Task List**: [actual time]ms - [Acceptable/Slow/Concerning]
- **100 Task Search**: [actual time]ms - [Analysis]
- **100 Task Bulk Update**: [actual time]ms - [Analysis]
- **1000 Task Export**: [actual time]ms - [Analysis]

### Performance Concerns
- [List any operations that seemed unusually slow]
- [Note any operations that degraded with scale]

### Recommendations
- [Only if performance issues found that need addressing]
```

---

## Section 9: Error Message Grammar Evaluation

### 9.1 Grammar and Clarity Check
**PURPOSE: Ensure all error messages use proper English grammar and are clearly worded**

Test various error conditions and evaluate messages for:
- Proper capitalization
- Complete sentences vs fragments (consistency)
- Clear, actionable guidance
- Professional tone
- Grammatical correctness

### 9.2 Delete Operation Errors
```bash
# Invalid position
mcp__todo-mcp__todo_delete position_id:999
# Check grammar: "Invalid parameter 'position_id': got 999, expected valid position number (1 to N)"
# Issues to check:
# - Sentence structure (fragment ok for errors?)
# - Capitalization consistency
# - Punctuation

# Invalid task ID
mcp__todo-mcp__todo_delete task_id:"#999"
# Check grammar: "task #999 not found"
# Issues to check:
# - Should be "Task #999 not found" (capitalize first word)?
# - Complete sentence vs fragment

# Missing parameters
mcp__todo-mcp__todo_delete
# Check grammar of error message
```

### 9.3 Other Operation Errors
```bash
# Complete without parameters
mcp__todo-mcp__todo_complete
# Grammar check: "Invalid parameter 'task_reference': got none provided, expected either..."
# - "got none provided" - should be "none was provided" or "nothing provided"?

# Update with invalid ID
mcp__todo-mcp__todo_update task_id:"not-a-number" content:"Test"
# Check grammar of error message

# Create with invalid data
mcp__todo-mcp__todo_create content:"" estimate_minutes:-30
# Check grammar of validation errors
```

### 9.4 Grammar Issues Found
Document any grammar/clarity issues:

#### Critical (Confusing/Misleading)
1. [Operation]: [Error message] - [Grammar issue]

#### Important (Unprofessional)
1. [Operation]: [Error message] - [Grammar issue]

#### Minor (Style inconsistency)
1. [Operation]: [Error message] - [Grammar issue]

### 9.5 Recommended Message Improvements
```markdown
## Current vs Suggested Error Messages

### Operation: [operation name]
**Current**: "error message with issue"
**Suggested**: "Improved error message"
**Reason**: [Grammar rule or clarity improvement]
```

---

## Section 10: Edge Cases

### 9.1 Special Characters
```bash
# Quotes and escaping
mcp__todo-mcp__todo_create content:"Task with 'single' and \"double\" quotes"
# Expected: Quotes preserved correctly

# Unicode and emoji
mcp__todo-mcp__todo_create content:"Task with emoji üöÄ and unicode: √±√°√©√≠√≥√∫"
# Expected: All characters preserved

# Markdown formatting
mcp__todo-mcp__todo_create content:"Task with **bold** and _italic_ and `code`"
# Expected: Markdown preserved as plain text

# Special shell characters
mcp__todo-mcp__todo_create content:"Task with $variable and command && echo test"
# Expected: Special characters preserved, not executed
```

### 9.2 Boundary Conditions
```bash
# Very long content (1000+ characters)
mcp__todo-mcp__todo_create content:"[create 1000+ character string]"
# Expected: Accepted or clear error about length limit

# Zero estimate
mcp__todo-mcp__todo_create content:"No estimate task" estimate_minutes:0
# Expected: Accepted or validation error

# Negative estimate
mcp__todo-mcp__todo_create content:"Negative estimate" estimate_minutes:-30
# Expected: Validation error

# Empty content
mcp__todo-mcp__todo_create content:""
# Expected: Validation error "Content required"
```

### 9.3 Concurrent Operation Handling
```bash
# Start a task
mcp__todo-mcp__todo_start position_id:1

# Try to start another (without completing first)
mcp__todo-mcp__todo_start position_id:2
# Expected: Either auto-pauses first, or error about multiple in-progress

# Multiple paused tasks
mcp__todo-mcp__todo_pause position_id:1 reason:"Blocked"
mcp__todo-mcp__todo_pause position_id:2 reason:"Also blocked"
mcp__todo-mcp__todo_list status:"paused"
# Expected: Both tasks shown as paused
```

---

## Section 10: STF Format Validation

### 10.1 List Format Check
```bash
mcp__todo-mcp__todo_list
# Expected multi-line STF format:
# N. [status] [priority] [content] [time] ¬´#ID¬ª
#    üè∑Ô∏è #tag1 #tag2 #tag3 (if tags exist)
#    ‚õî Blocked by: ¬´#42¬ª (if dependencies exist - future)
# Where:
#   status: ‚óã (created) ‚óê (in_progress) ‚äò (paused) ‚óè (completed)
#   priority: ‚ö° (critical) üî¥ (high) üü° (medium) üü¢ (low) üîµ (backlog)
#   time: (est: Xh) or (est: Xh | elapsed: Xm) or (actual: Xh)
#   ID: ¬´#N¬ª format
#   tags: On separate line with 3-space indent and üè∑Ô∏è emoji
#   dependencies: On separate line with 3-space indent and ‚õî/‚û§ emoji (future)
```

### 10.2 Individual Method Outputs
```bash
# Create
mcp__todo-mcp__todo_create content:"Format test" priority:"high"
# Expected: "Created task #N: Format test"

# Start
mcp__todo-mcp__todo_start position_id:1
# Expected: "‚ñ∂ Started task #N: Format test"

# Complete
mcp__todo-mcp__todo_complete position_id:1
# Expected: "‚úÖ Completed task #N: Format test (took Xm)"

# Update
mcp__todo-mcp__todo_update position_id:1 priority:"critical"
# Expected: "üìù Updated task #N: [content]"

# Delete
mcp__todo-mcp__todo_delete position_id:1
# Expected: "üóëÔ∏è Deleted task #N: [content]"
```

---

## Section 11: Deferred Testing

### Items Deferred for Future Testing
The following areas are intentionally deferred and not part of regular v0.6.8 testing:

1. **Migration Compatibility** - Internal testing only
2. **Concurrent Operations** - Not a design intent for this system
3. **Import from Different Formats** - Deferred to future release
4. **Extreme Edge Cases** - Deferred:
   - Very large batches (1000+ items)
   - Very large estimates (10000+ minutes)
   - Stress testing with rapid operations
   - Server recovery after crashes
   - Corrupted file handling

These will be considered for future releases or specific testing scenarios.

---

## Acceptance Criteria Checklist

### üî¥ CRITICAL (Must Pass for Release)
- [ ] **ALL TEST SECTIONS COMPLETED** - No skipped or abbreviated tests
- [ ] Dual-parameter resolution works correctly
- [ ] Both position_id and task_id accepted
- [ ] Bulk operations are atomic (all or nothing)
- [ ] Archive safely exports before clearing
- [ ] Export/import round-trip preserves all data
- [ ] No data loss in any operation
- [ ] Server stays running (no crashes)
- [ ] **EVERY test case executed** - 100% test coverage achieved

### üü° IMPORTANT (Should Pass)
- [ ] Search is case-insensitive
- [ ] Filters combine correctly
- [ ] Sort orders work as expected
- [ ] All export formats valid
- [ ] Pattern matching in context_delete works
- [ ] STF format consistent everywhere
- [ ] Error messages are clear and actionable

### üü¢ NICE TO HAVE (Non-Blocking)
- [ ] Performance targets met (<100ms)
- [ ] Helpful suggestions in errors
- [ ] Migration from v0.6.6 smooth
- [ ] Special characters handled gracefully

---

## Test Execution Log

| Section | Pass | Fail | Notes | Time |
|---------|------|------|-------|------|
| Pre-test Setup | | | | |
| 1. Dual-Parameter | | | | |
| 2. Enhanced List | | | | |
| 3. Bulk Operations | | | | |
| 4. Export | | | | |
| 5. Archive | | | | |
| 6. Import | | | | |
| 7. Context Mgmt | | | | |
| 8. Performance | | | | |
| 9. Edge Cases | | | | |
| 10. STF Format | | | | |
| 11. Migration | | | | |

**Total Tests:** _____ **Passed:** _____ **Failed:** _____

---

## Issues Found

**ALL issues discovered during acceptance testing should be fixed before release.**
The goal is to deliver the highest quality release possible.

### Issues Requiring Fix:
1. 
2. 
3. 
4. 

---

## Final Sign-Off

**All Critical Tests Passed:** [ ] Yes [ ] No  
**Server Stability:** [ ] Stable [ ] Crashes noted  
**Data Integrity:** [ ] Verified [ ] Issues found  
**Performance:** [ ] Acceptable [ ] Issues noted  

**Ready for v0.6.8 Release:** [ ] YES [ ] NO

**Tested By:** _____________  
**Date:** _____________  
**Platform:** _____________  
**Test Duration:** _____________  

---

## Test Report Documentation Requirements

### For Each Test Section
Document in your test report file:
```markdown
## Section N: [Section Name]
- **Started**: HH:MM:SS
- **Completed**: HH:MM:SS
- **Result**: PASS / FAIL / PARTIAL
- **Tests Run**: X
- **Tests Passed**: Y
- **Tests Failed**: Z

### Failed Tests:
1. **Test N.N**: [Test description]
   - **Command**: `[exact command that failed]`
   - **Expected**: [what should have happened]
   - **Actual**: [what actually happened]
   - **Error Message**: [exact error if any]
   - **Impact**: Description of how this affects users

### Notes:
[Any observations, crashes, performance issues]
```

### Final Test Report Summary
At the end of testing, complete the summary section:
```markdown
## Final Test Summary
- **Test Completed**: [YYYY-MM-DD HH:MM:SS]
- **Total Duration**: [X hours Y minutes]
- **Overall Result**: PASS / FAIL
- **Total Tests**: X
- **Passed**: Y (Z%)
- **Failed**: A (B%)
- **Critical Issues**: [count]
- **Ready for Release**: YES / NO

## Critical Issues Summary
[List all blocking issues]

## Recommendations
[Specific fixes needed before release]
```

---

## Section 11: Project Backup and Restore

### 11.1 Basic Dump and Restore
```bash
# Create test data
mcp__todo-mcp__todo_create content:"Task for backup 1" priority:"high" estimate_minutes:60
mcp__todo-mcp__todo_create content:"Task for backup 2" priority:"critical" estimate_minutes:120
mcp__todo-mcp__todo_create content:"Task for backup 3" priority:"low" estimate_minutes:30

# Start and complete one task
mcp__todo-mcp__todo_start position_id:1
mcp__todo-mcp__todo_complete position_id:1

# Set some context
mcp__todo-mcp__context_set key:"backup_test" value:"This should be backed up"
mcp__todo-mcp__context_set key:"session_data" value:"Important session info"

# Create backup WITH context
mcp__todo-mcp__project_dump include_context:true
# Expected: Returns path like "tasks/backups/project_dump_YYYYMMDD_HHMMSS.json"
# SAVE THIS PATH for restore test

# Clear everything
mcp__todo-mcp__todo_clear_all force:true
mcp__todo-mcp__context_clear force:true

# Verify empty state
mcp__todo-mcp__todo_list
# Expected: Empty (no tasks)
mcp__todo-mcp__context_get_all
# Expected: Empty (no context)

# Restore from backup (replace mode)
mcp__todo-mcp__project_restore file_path:"[PATH FROM DUMP]" mode:"replace" restore_context:true
# Expected: Success with restore summary

# Verify restoration
mcp__todo-mcp__todo_list
# Expected: All 3 tasks restored (1 completed, 2 pending)
mcp__todo-mcp__context_get key:"backup_test"
# Expected: "This should be backed up"
```

### 11.2 Backup Without Context
```bash
# Create another backup WITHOUT context
mcp__todo-mcp__project_dump include_context:false
# Expected: Returns path, smaller file size

# Test validation mode
mcp__todo-mcp__project_restore file_path:"[PATH]" mode:"validate"
# Expected: Validation report with no changes made
```

### 11.3 Compressed Backup
```bash
# Create compressed backup
mcp__todo-mcp__project_dump compress:true
# Expected: Returns path ending in .json.gz

# Restore should auto-detect compression
mcp__todo-mcp__project_restore file_path:"[COMPRESSED PATH]" mode:"replace"
# Expected: Successful restore from compressed file
```

---

## Section 12: Context Management

### 12.1 Basic Context Operations
```bash
# Set various context keys
mcp__todo-mcp__context_set key:"user_preference" value:"dark_mode"
mcp__todo-mcp__context_set key:"session_id" value:"12345"
mcp__todo-mcp__context_set key:"last_task" value:"#42"

# Get specific key
mcp__todo-mcp__context_get key:"user_preference"
# Expected: "dark_mode"

# Get all context
mcp__todo-mcp__context_get_all
# Expected: Shows all 3 keys with values and timestamps

# Update existing key
mcp__todo-mcp__context_set key:"user_preference" value:"light_mode"
mcp__todo-mcp__context_get key:"user_preference"
# Expected: "light_mode" (updated)

# Delete specific key
mcp__todo-mcp__context_delete key:"session_id"
mcp__todo-mcp__context_get_all
# Expected: Only 2 keys remain
```

### 12.2 Context Statistics
```bash
# Add more context for testing
mcp__todo-mcp__context_set key:"temp_data_1" value:"Some temporary data that might be longer"
mcp__todo-mcp__context_set key:"temp_data_2" value:"Another piece of temporary information"
mcp__todo-mcp__context_set key:"lesson_learned" value:"Always test thoroughly"

# Get context statistics
mcp__todo-mcp__context_stats
# Expected: Shows total keys, total size, categories breakdown

# Test context_resume (for crash recovery)
mcp__todo-mcp__context_resume
# Expected: Combined view of context and current task state
```

### 12.3 Context Cleanup
```bash
# Clear all context (requires force flag)
mcp__todo-mcp__context_clear
# Expected: Error - requires force:true

# Clear with force
mcp__todo-mcp__context_clear force:true
# Expected: All context cleared

# Verify empty
mcp__todo-mcp__context_get_all
# Expected: Empty context storage
```

## Test Cleanup (REQUIRED)

After completing ALL tests and documenting results, clean up the MCP installation:

### Reset Database and Context
```bash
# Archive any remaining completed tasks (preserves data)
mcp__todo-mcp__todo_archive

# Clear all active tasks
mcp__todo-mcp__todo_clear_all force:true

# Clear all context storage
mcp__todo-mcp__context_clear force:true

# Verify clean state
mcp__todo-mcp__project_status
# Expected: 0 tasks, 0 context keys

# This leaves the MCP installation ready for production use
```

### Final Report Note
Add to test report:
```markdown
## Post-Test Cleanup
- Archived completed tasks: [timestamp]
- Cleared all active tasks: YES
- Cleared all context: YES  
- Database reset to clean state: YES
- MCP ready for production use: YES
```

## Notes
- Run tests in order - some depend on earlier setup
- Use actual mcp__todo-mcp__ commands in Claude Desktop or CLI mode
- Document EVERYTHING in your test report file
- Record exact error messages when tests fail
- Note any server crashes immediately with timestamp
- Save test database for debugging if issues found
- The test report is your primary deliverable - it must be complete and accurate
- ALWAYS run cleanup after test completion